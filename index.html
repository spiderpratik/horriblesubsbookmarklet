<!DOCTYPE html>
<html>

<head>
  <title>Anime Downloader Bookmarklet</title>
</head>

<body>
  <div>
    <p>
      Drag the link below to you bookmarks.<br/>
      Open the Anime episode listing page and click the bookmarklet.<br/>
      Ensure that your browser is set to (automatically) forward magnet links to your torrent client.<br/>
      Tested with <a href="https://www.utorrent.com/downloads">ÂµTorrent</a>.<br/>
      GiHub Repository: <a
        href="https://github.com/the-codinator/anime-downloader-bookmarklet/">the-codinator/anime-downloader-bookmarklet</a>.<br/>
      Author: The Codinator!<br/>
      <br/>
      The following websites are supported:<br/>
    <ul>
      <li><a href="https://horriblesubs.info"><del>HorribleSubs</del></a> R.I.P :(<br/></li>
      <li><a href="https://subsplease.org/shows/">Subs Please</a><br/></li>
      <li><a href="https://www.erai-raws.info/anime-list/">Erai Raws</a><br/></li>
    </ul>
    </p>
  </div>
  <div>
    Here's a combined bookmarklet:
    <a href="javascript:(function()%7B(function%20downloader()%20%7B%2F*%20core.js%20*%2F%2F***%20Available%20params*%20xQuality%20%3D%20'480p'%20%7C%20'720p'%20%7C%20'1080p'%20(default)*%20xStart%20%3D%20smallest%20episode%20number%20to%20include%20(default%20%3D%201)*%20xEnd%20%3D%20biggest%20episode%20number%20to%20include%20(default%20%3D%20-1)*%20xDebug%20%3D%20enable%20debug%20logging%20(default%20%3D%20false)*%2Fconst%20startTs%20%3D%20Date.now()%3Bconst%20xDebug%20%3D%20(typeof%20window.xDebug%20%3D%3D%3D%20'boolean'%20%26%26%20window.xDebug)%20%7C%7C%20false%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20Debug%20Flag%20*%2Fconst%20xQuality%20%3D%20(%5B'480p'%2C%20'720p'%2C%20'1080p'%5D.includes(window.xQuality)%20%26%26%20window.xQuality)%20%7C%7C%20'1080p'%3B%20%20%20%20%2F*%20Video%20Resolution%20*%2Fconst%20xStart%20%3D%20(typeof%20window.xStart%20%3D%3D%3D%20'number'%20%26%26%20window.xStart)%20%7C%7C%201%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20Start%20Episode%20*%2Fconst%20xEnd%20%3D%20(typeof%20window.xEnd%20%3D%3D%3D%20'number'%20%26%26%20window.xEnd)%20%7C%7C%20-1%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%20End%20Episode%20*%2Fconst%20SHOW_MORE_DELAY%20%3D%203000%3Bconst%20SLOW_OPEN_DELAY%20%3D%20666%3Bconst%20debugLog%20%3D%20(msg%2C%20arg)%20%3D%3E%20xDebug%20%3F%20infoLog(msg%2C%20arg)%20%3A%20''%3Bconst%20infoLog%20%3D%20(msg%2C%20arg)%20%3D%3E%20%7Bconst%20fullMsg%20%3D%20%60%5BCodi%5D%20%5B%24%7BDate.now()%20-%20startTs%7D%5D%20%24%7Bmsg%7D%60%3Bif%20(typeof%20arg%20!%3D%3D%20'undefined')%20%7Bconsole.log(fullMsg%2C%20arg)%3B%7D%20else%20%7Bconsole.log(fullMsg)%3B%7D%7D%3BinfoLog('Script%20init'%2C%20%7BstartTs%2C%20xDebug%2C%20xQuality%2C%20xStart%2C%20xEnd%7D)%3B%2F*%20Some%20browsers%20block%20opening%20a%20huge%20number%20of%20tabs%20in%20quick%20succession%20*%2Ffunction%20slowPageOpener(magnets)%20%7BdebugLog('Starting%20slowPageOpener.%20Count%3A'%2C%20magnets.length)%3Blet%20i%20%3D%200%3Bconst%20recursive%20%3D%20window.setInterval(()%20%3D%3E%20%7Bwindow.open(magnets%5Bi%2B%2B%5D%2C%20'_blank')%3Bif%20(i%20%3E%3D%20magnets.length)%20%7Bwindow.clearInterval(recursive)%3BinfoLog('Script%20complete!')%3B%7D%7D%2C%20SLOW_OPEN_DELAY)%3B%7D%2F*%20include%20horriblesubs.js%20*%2Ffunction%20horriblesubs()%20%7Bfunction%20triggerShowMore()%20%7Bconst%20moreButton%20%3D%20document.querySelector('.more-button')%3Bif%20(moreButton)%20%7BdebugLog('Clicking%20%22Show%20More%22%20button')%3BmoreButton.click()%3B%20%2F*%20Load%20more%20results%20*%2F%7Dreturn%20moreButton%3B%7Dfunction%20loadAllEpisodes(callback)%20%7Bconst%20recursive%20%3D%20window.setInterval(()%20%3D%3E%20%7Bif%20(!triggerShowMore())%20%7Bwindow.clearInterval(recursive)%3BdebugLog('Loaded%20all%20episodes')%3Bcallback()%3B%7D%7D%2C%20SHOW_MORE_DELAY)%3B%7Dfunction%20getEpisodeMagnetLinks()%20%7Bconst%20divs%20%3D%20Array.from(document.querySelectorAll('.rls-info-container'))%3B%20%2F*%20Get%20all%20episode%20divs%20(as%20Array)%20*%2FdebugLog('Queried%20all%20episode%20divs'%2C%20divs)%3Bconst%20hrefs%20%3D%20divs.map(x%20%3D%3E%20x.querySelector('.link-'%20%2B%20xQuality))%20%2F*%20Get%20specified%20xQuality%20div%20*%2F.map(x%20%3D%3E%20x.querySelector('.x-magnet-link'))%20%2F*%20Get%20magnet%20link%20span%20*%2F.map(x%20%3D%3E%20x.querySelector('a'))%20%2F*%20Get%20link%20element%20*%2F.map(x%20%3D%3E%20x.href)%3B%20%2F*%20Get%20href%20*%2FdebugLog('Loaded%20all%20magnet%20hrefs'%2C%20hrefs)%3Bif%20(xStart%20%3D%3D%3D%200%20%26%26%20xEnd%20%3D%3D%3D%20-1)%20%7BdebugLog('No%20custom%20start%2Fend%2C%20returning%20all%20magnet%20hrefs')%3Breturn%20hrefs%3B%7Dconst%20ids%20%3D%20divs.map(x%20%3D%3E%20parseInt(x.id))%3B%20%2F*%20Get%20episode%20number%20*%2FdebugLog('Loaded%20all%20episode%20numbers')%3Bconst%20filteredHrefs%20%3D%20ids.map((x%2C%20i)%20%3D%3E%20(%7Bid%3A%20x%2Cmagnet%3A%20hrefs%5Bi%5D%2C%7D)).filter((%7Bid%2C_%2C%7D)%20%3D%3E%20id%20%3E%3D%20xStart%20%26%26%20(id%20%3C%3D%20xEnd%20%7C%7C%20xEnd%20%3D%3D%3D%20-1)).map((%7B_%2Cmagnet%2C%7D)%20%3D%3E%20magnet)%3BdebugLog('Filtered%20episode%20list')%3Breturn%20filteredHrefs%3B%7Dfunction%20findAndOpenEpisodes()%20%7Bconst%20magnets%20%3D%20getEpisodeMagnetLinks()%3BdebugLog('Opening%20magnets'%2C%20magnets)%3Bif%20(magnets%20%26%26%20magnets%20instanceof%20Array%20%26%26%20magnets.length%20%3E%200)%20%7BinfoLog(%60Episode%20Count%3A%20%24%7Bmagnets.length%7D%60)%3BslowPageOpener(magnets)%3B%7D%20else%20%7BinfoLog('Magnets%20value'%2C%20magnets)%3Bthrow%20Error('No%20magnets%20found%20to%20open')%3B%7D%7DloadAllEpisodes(findAndOpenEpisodes)%3B%7D%2F*%20include%20subsplease.js%20*%2Ffunction%20subsplease()%20%7Bfunction%20getEpisodes()%20%7Bconst%20nodes%20%3D%20document.querySelector('%23show-release-table').querySelectorAll('.show-release-item')%3Bconst%20data%20%3D%20Array.from(nodes)%20%2F*%20Get%20each%20episode%20*%2F.map(x%20%3D%3E%20%7Bconst%20text%20%3D%20x.querySelector('.episode-title').innerText%3B%20%2F*%20Get%20title%20*%2Fconst%20episode%20%3D%20parseInt(text.match(%2F%5E.*%20(%5Cd%2B)%24%2F)%5B1%5D)%3B%20%2F*%20Get%20episode%20number%20*%2Fconst%20linksElement%20%3D%20x.querySelectorAll('.links')%3B%20%2F*%20Get%20links%20element%20*%2Fconst%20links%20%3D%20Array.from(linksElement).find(a%20%3D%3E%20a.innerText.includes(xQuality))%3Bconst%20href%20%3D%20links.nextSibling.href%3B%20%2F*%20Get%20href%20for%20the%20right%20quality%20*%2Freturn%20%7Bepisode%2Chref%2C%7D%3B%7D)%3Bdata.sort((a%2C%20b)%20%3D%3E%20a.episode%20-%20b.episode)%3B%20%2F*%20Fix%20the%20order%20(coz%20its%20usually%20descending%20order)%20*%2FdebugLog('Loaded%20all%20magnet%20hrefs'%2C%20data)%3Bif%20(xStart%20%3D%3D%3D%200%20%26%26%20xEnd%20%3D%3D%3D%20-1)%20%7BdebugLog('No%20custom%20start%2Fend%2C%20returning%20all%20magnet%20hrefs')%3Breturn%20data.map(x%20%3D%3E%20x.href)%3B%7Dconst%20filteredData%20%3D%20data.filter(x%20%3D%3E%20x.episode%20%3E%3D%20xStart%20%26%26%20(x.episode%20%3C%3D%20xEnd%20%7C%7C%20xEnd%20%3D%3D%3D%20-1)).map(x%20%3D%3E%20x.href)%3BdebugLog('Filtered%20episode%20list')%3Breturn%20filteredData%3B%7Dfunction%20findAndOpenEpisodes()%20%7Bconst%20magnets%20%3D%20getEpisodes()%3BdebugLog('Opening%20magnets'%2C%20magnets)%3Bif%20(magnets%20%26%26%20magnets%20instanceof%20Array%20%26%26%20magnets.length%20%3E%200)%20%7BinfoLog(%60Episode%20Count%3A%20%24%7Bmagnets.length%7D%60)%3BslowPageOpener(magnets)%3B%7D%20else%20%7BinfoLog('Magnets%20value'%2C%20magnets)%3Bthrow%20Error('No%20magnets%20found%20to%20open')%3B%7D%7DfindAndOpenEpisodes()%3B%7D%2F*%20include%20erairaws.js%20*%2Ffunction%20erairaws()%20%7Bfunction%20triggerShowMore()%20%7Bconst%20moreButton%20%3D%20document.querySelector('.load_more')%3Bif%20(moreButton)%20%7BdebugLog('Clicking%20%22Show%20More%22%20button')%3BmoreButton.click()%3B%20%2F*%20Load%20more%20results%20*%2F%7Dreturn%20moreButton%3B%7Dfunction%20loadAllEpisodes(callback)%20%7Bconst%20recursive%20%3D%20window.setInterval(()%20%3D%3E%20%7Bif%20(!triggerShowMore())%20%7Bwindow.clearInterval(recursive)%3BdebugLog('Loaded%20all%20episodes')%3Bcallback()%3B%7D%7D%2C%20SHOW_MORE_DELAY)%3B%7Dfunction%20getEpisodes()%20%7Bconst%20nodes%20%3D%20document.querySelector('.show-episodes').querySelectorAll('article')%3Bconst%20data%20%3D%20Array.from(nodes).map(x%20%3D%3E%20%7Bconst%20episode%20%3D%20parseInt(x.querySelector('font').lastElementChild.querySelector('font').innerText)%3Bconst%20releaseLinks%20%3D%20x.querySelectorAll('.release-links')%3Bconst%20div%20%3D%20Array.from(releaseLinks).find(a%20%3D%3E%20a.querySelector('i').innerText.includes(xQuality))%3Bconst%20links%20%3D%20div.querySelectorAll('a')%3Bconst%20href%20%3D%20Array.from(links).find(a%20%3D%3E%20a.href.includes('magnet')).href%3Breturn%20%7Bepisode%2Chref%2C%7D%3B%7D)%3Bdata.sort((a%2C%20b)%20%3D%3E%20a.episode%20-%20b.episode)%3B%20%2F*%20Fix%20the%20order%20(coz%20its%20usually%20descending%20order)%20*%2FdebugLog('Loaded%20all%20magnet%20hrefs'%2C%20data)%3Bif%20(xStart%20%3D%3D%3D%200%20%26%26%20xEnd%20%3D%3D%3D%20-1)%20%7BdebugLog('No%20custom%20start%2Fend%2C%20returning%20all%20magnet%20hrefs')%3Breturn%20data.map(x%20%3D%3E%20x.href)%3B%7Dconst%20filteredData%20%3D%20data.filter(x%20%3D%3E%20x.episode%20%3E%3D%20xStart%20%26%26%20(x.episode%20%3C%3D%20xEnd%20%7C%7C%20xEnd%20%3D%3D%3D%20-1)).map(x%20%3D%3E%20x.href)%3BdebugLog('Filtered%20episode%20list')%3Breturn%20filteredData%3B%7Dfunction%20findAndOpenEpisodes()%20%7Bconst%20magnets%20%3D%20getEpisodes()%3BdebugLog('Opening%20magnets'%2C%20magnets)%3Bif%20(magnets%20%26%26%20magnets%20instanceof%20Array%20%26%26%20magnets.length%20%3E%200)%20%7BinfoLog(%60Episode%20Count%3A%20%24%7Bmagnets.length%7D%60)%3BslowPageOpener(magnets)%3B%7D%20else%20%7BinfoLog('Magnets%20value'%2C%20magnets)%3Bthrow%20Error('No%20magnets%20found%20to%20open')%3B%7D%7DloadAllEpisodes(findAndOpenEpisodes)%3B%7D%2F*%20include%20switcher.js%20*%2Ffunction%20switcher()%20%7Bconst%20site%20%3D%20window.location.host%3Bif%20(site.includes('horriblesubs'))%20%7BinfoLog('Detected%20HorribleSubs')%3Bhorriblesubs()%3B%7D%20else%20if%20(site.includes('subsplease'))%20%7BinfoLog('Detected%20SubsPlease')%3Bsubsplease()%3B%7D%20else%20if%20(site.includes('erai-raws'))%20%7BinfoLog('Detected%20Erai%20Raws')%3Berairaws()%3B%7D%20else%20%7Bthrow%20new%20Error('Unsupported%20site%20for%20anime%20downloader')%3B%7D%7Dswitcher()%3B%7D)()%7D)()">
      <b>Anime Downloader</b>
    </a>
  </div>
</body>

</html>
